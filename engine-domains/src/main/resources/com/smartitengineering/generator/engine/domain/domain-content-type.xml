<?xml version="1.0" encoding="UTF-8"?>
<contentTypes xmlns="http://www.smartitengineering.com/smart-cms/content/content-type-schema" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xsi:schemaLocation="http://www.smartitengineering.com/smart-cms/content/content-type-schema http://smart-cms.kenai.com/schemas/cms/content-type/dev/content-type-schema.xsd">
  <contentType namespace="${smart.generator.engine.contentType.report.namespace}">
    <name>${smart.generator.engine.contentType.report.name}</name>
    <displayName>Report Instance</displayName>
    <defType>ABSTRACT_TYPE</defType>
    <primaryField>name</primaryField>
    <fields>
      <field>
        <name>name</name>
        <displayName>Name</displayName>
        <value>
          <string>
            <mimeType>text/plain</mimeType>
          </string>
        </value>
        <search>
          <index>true</index>
          <store>true</store>
        </search>
      </field>
      <field>
        <name>triggerDate</name>
        <displayName>Trigger Date</displayName>
        <value>
          <datetime />
        </value>
        <search>
          <index>true</index>
          <store>true</store>
        </search>
      </field>
      <field>
        <name>executionStartDate</name>
        <displayName>Execution Started</displayName>
        <value>
          <datetime />
        </value>
        <search>
          <index>true</index>
          <store>true</store>
        </search>
      </field>
      <field>
        <name>executionEndDate</name>
        <displayName>Execution Ended</displayName>
        <value>
          <datetime />
        </value>
        <search>
          <index>true</index>
          <store>true</store>
        </search>
      </field>
      <field>
        <name>reportConfig</name>
        <displayName>Report Configuration Generated From</displayName>
        <value>
          <content>
            <definition>
              <typeNS>com.smartitengineering.generator.engine.domain</typeNS>
              <typeName>ReportConfig</typeName>
            </definition>
            <availableForSearch>true</availableForSearch>
          </content>
        </value>
        <search>
          <index>true</index>
          <store>false</store>
        </search>
      </field>
      <field>
        <name>params</name>
        <displayName>Params to the generated Report</displayName>
        <value>
          <composition>
            <content>
              <definition>
                <typeNS>com.smartitengineering.generator.engine.domain</typeNS>
                <typeName>Map</typeName>
              </definition>
              <availableForSearch>true</availableForSearch>
            </content>
          </composition>
        </value>
        <search>
          <index>true</index>
          <store>false</store>
        </search>
      </field>
    </fields>
  </contentType>
  <contentType namespace="com.smartitengineering.generator.engine.domain">
    <name>Map</name>
    <displayName>Map</displayName>
    <defType>CONCRETE_COMPONENT</defType>
    <primaryField>entries</primaryField>
    <fields>
      <field>
        <name>entries</name>
        <displayName>Entries</displayName>
        <value>
          <collection>
            <simple-value>
              <composition>
                <field>
                  <name>key</name>
                  <displayName>Key</displayName>
                  <value>
                    <string>
                      <mimeType>text/plain</mimeType>
                    </string>
                  </value>
                  <required>true</required>
                </field>
                <field>
                  <name>value</name>
                  <displayName>Value</displayName>
                  <value>
                    <string>
                      <mimeType>text/plain</mimeType>
                    </string>
                  </value>
                  <required>true</required>
                </field>
              </composition>
            </simple-value>
          </collection>
        </value>
      </field>
    </fields>
  </contentType>
  <contentType namespace="com.smartitengineering.generator.engine.domain">
    <name>ReportConfig</name>
    <primaryField>name</primaryField>
    <fields>
      <field>
        <name>name</name>
        <displayName>name</displayName>
        <value>
          <string>
            <mimeType>text/plain</mimeType>
          </string>
        </value>
        <required>true</required>
        <search>
          <index>true</index>
        </search>
      </field>
      <field>
        <name>params</name>
        <displayName>Params to Report</displayName>
        <value>
          <composition>
            <content>
              <definition>
                <typeNS>com.smartitengineering.generator.engine.domain</typeNS>
                <typeName>Map</typeName>
              </definition>
              <availableForSearch>true</availableForSearch>
            </content>
          </composition>
        </value>
        <search>
          <index>false</index>
          <store>false</store>
        </search>
      </field>
      <field>
        <name>trigger</name>
        <displayName>Trigger Cron Expression</displayName>
        <value>
          <string>
            <mimeType>text/plain</mimeType>
          </string>
        </value>
        <required>true</required>
      </field>
      <field>
        <name>validTill</name>
        <displayName>Auto Generation Valid Till</displayName>
        <value>
          <datetime />
        </value>
        <required>true</required>
      </field>
      <field>
        <name>embeddedSourceCode</name>
        <displayName>Embedded Code</displayName>
        <value>
          <composition>
            <content>
              <definition>
                <typeNS>com.smartitengineering.generator.engine.domain</typeNS>
                <typeName>SourceCode</typeName>
              </definition>
            </content>
          </composition>
        </value>
      </field>
      <field>
        <name>codeOnDemand</name>
        <displayName>Code on Demand</displayName>
        <value>
          <content>
            <definition>
              <typeNS>com.smartitengineering.generator.engine.domain</typeNS>
              <typeName>CodeOnDemand</typeName>
            </definition>
          </content>
        </value>
      </field>
      <field>
        <name>schedules</name>
        <displayName>Schedules for the trigger</displayName>
        <value>
          <collection>
            <simple-value>
              <datetime />
            </simple-value>
            <minSize>1</minSize>
          </collection>
        </value>
        <required>true</required>
        <search>
          <index>true</index>
        </search>
      </field>
      <field>
        <name>emailConfig</name>
        <displayName>Email Config</displayName>
        <value>
          <collection>
            <simple-value>
              <composition>
                <field>
                  <name>to</name>
                  <displayName></displayName>
                  <value>
                    <collection>
                      <simple-value>
                        <string>
                          <mimeType>text/plain</mimeType>
                        </string>
                      </simple-value>
                    </collection>
                  </value>
                </field>
                <field>
                  <name>cc</name>
                  <displayName></displayName>
                  <value>
                    <collection>
                      <simple-value>
                        <string>
                          <mimeType>text/plain</mimeType>
                        </string>
                      </simple-value>
                    </collection>
                  </value>
                </field>
                <field>
                  <name>bcc</name>
                  <displayName></displayName>
                  <value>
                    <collection>
                      <simple-value>
                        <string>
                          <mimeType>text/plain</mimeType>
                        </string>
                      </simple-value>
                    </collection>
                  </value>
                </field>
                <field>
                  <name>subject</name>
                  <displayName></displayName>
                  <value>
                    <string>
                      <mimeType>text/plain</mimeType>
                    </string>
                  </value>
                </field>
                <field>
                  <name>representationName</name>
                  <displayName>Report's Representation To Distribute</displayName>
                  <value>
                    <string>
                      <mimeType>text/plain</mimeType>
                    </string>
                  </value>
                </field>
              </composition>
            </simple-value>
          </collection>
        </value>
        <search>
          <index>false</index>
          <store>false</store>
        </search>
      </field>
    </fields>
  </contentType>
  <contentType namespace="com.smartitengineering.generator.engine.domain">
    <name>CodeOnDemand</name>  
    <displayName>Code On Demand</displayName>
    <primaryField>code</primaryField>
    <fields>
      <field>
        <name>code</name>
        <displayName>Code</displayName>
        <value>
          <composition>
            <content>
              <definition>
                <typeNS>com.smartitengineering.generator.engine.domain</typeNS>
                <typeName>SourceCode</typeName>
              </definition>
            </content>
          </composition>
        </value>
      </field>
    </fields>
  </contentType>
  <contentType namespace="com.smartitengineering.generator.engine.domain">
    <name>SourceCode</name>  
    <displayName>SourceCode</displayName>
    <defType>CONCRETE_COMPONENT</defType>
    <primaryField>code</primaryField>
    <fields>
      <field>
        <name>code</name>
        <displayName>Code</displayName>
        <value>
          <composition>
            <field>
              <name>embeddedCode</name>
              <displayName>Embedded Code</displayName>
              <value>
                <string>
                  <mimeType>text/plain</mimeType>
                </string>
              </value>
            </field>
            <field>
              <name>codeType</name>
              <displayName>Code Type</displayName>
              <value>
                <enumeration>
                  <choice>GROOVY</choice>
                  <choice>RUBY</choice>
                  <choice>JAVASCRIPT</choice>
                </enumeration>
              </value>
            </field>
          </composition>
        </value>
      </field>
    </fields>
  </contentType>
</contentTypes>
